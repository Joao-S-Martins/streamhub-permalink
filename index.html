<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="//livefyre-cdn.s3.amazonaws.com/libs/sdk/v2.5.1/rc/builds/11/streamhub-sdk.min.css">
    <style>
    #view {
        /*width:500px;*/
    }
    </style>
</head>
    <body>
        <div id="view"></div>

        <script src="lib/cajon/cajon.js" type="text/javascript"></script>
        <script src="requirejs.conf.js" type="text/javascript"></script>
        <script>
            requirejs({
                baseUrl: ""
            });
        </script>
        <script type="text/javascript" src="dist/streamhub-permalink.min.js"></script>
        <script>
        HubPermalink.require([
            'streamhub-permalink'
        ],function (Permalink) {
            // http://localhost:8080/index.html?lf-content=10772933:26482715
            var pl = Permalink.getInstance(),
                key = Permalink.KEYS.CONTENT;
            pl.default(key, function(content) {
                alert('Default handler for permalink content');
            })

            var content = pl.get(key);
            if (!content) {
                pl.on(key, function () {
                    content = pl.get(key);
                    alert('got "content" event');
                    pl.get(key) && alert('can get(key)');
                    // pl.preventDefault(key);//Comment in to prevent the default handler
                });
            } else {
                alert('got content right away');
            }
        });
        </script>
    </body>
</html>
